var path = "./JBGPRO";
device.vibrate(100);
toast("请给予无障碍服务权限")
auto.waitFor();
toast("请给予悬浮窗权限");

var window = floaty.window(
    <vertical w="90" alpha="0.8">
        <button  style="Widget.AppCompat.Button.Colored" id="about" text="联系作者" />
        <button id="action" text="运行脚本" />
        <button id="goaway" text="退出脚本" />
    </vertical>
);


window.exitOnClose();


window.setPosition(0,device.height*0.3);


var execution = null;

window.about.click(()=>{
    device.vibrate(100);
    toast("脚本哥Q群：16768994")
    app.startActivity({
action: "android.intent.action.VIEW",
data: "mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3D-XJTzxSmC3gHeO-kR1fPu5yd_TrNzyat",
packageName: "com.tencent.mobileqq",
});

    });

window.action.click(()=>{
    device.vibrate(100);
    execution = engines.execScriptFile(path);
    window.action.visibility = android.view.View.GONE; 
});


window.goaway.click(()=>{
  if(execution){
            execution.getEngine().forceStop();}
            device.vibrate(100);
exit();
});


setInterval(()=>{}, 1000);

